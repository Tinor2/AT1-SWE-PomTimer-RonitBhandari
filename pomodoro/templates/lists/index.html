{% extends 'base.html' %}

{% block title %}My Lists{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
{% endblock %}

{% block content %}
<div class="lists-page">
    <div class="page-header">
        <h1>My Lists</h1>
        <a href="{{ url_for('lists.create') }}" class="btn btn-primary">Create New List</a>
    </div>
    
    <div class="lists-grid">
        {% for list in lists %}
            <div class="list-card {% if list['is_active'] %}active{% endif %}">
                <h3>{{ list['name'] }}</h3>
                <p class="list-description">{{ list['description'] or 'No description' }}</p>
                
                <div class="list-settings">
                    <span>Session: {{ list['pomo_session'] }}m</span>
                    <span>Short: {{ list['pomo_short_break'] }}m</span>
                    <span>Long: {{ list['pomo_long_break'] }}m</span>
                </div>
                
                <div class="list-actions">
                    <form method="post" action="{{ url_for('lists.select_list', id=list['id']) }}" style="display: inline;">
                        <button type="submit" class="btn btn-select" {% if list['is_active'] %}disabled{% endif %}>
                            {% if list['is_active'] %}Active{% else %}Select{% endif %}
                        </button>
                    </form>
                    <button type="button" class="btn btn-delete delete-list-btn" data-list-id="{{ list['id'] }}" data-list-name="{{ list['name'] }}">Delete</button>
                    <button class="btn btn-edit" disabled>
                        <img src="{{ url_for('static', filename='assets/setting.png') }}" alt="Edit settings" style="height: 16px; width: 16px; vertical-align: middle;"/>
                    </button>
                </div>
            </div>
        {% else %}
            <div class="empty-state">
                <p>No lists yet. <a href="{{ url_for('lists.create') }}">Create your first list</a></p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- List Delete Confirmation Modal -->
<div id="listDeleteModal" class="modal" role="dialog" aria-labelledby="listModalTitle" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="listModalTitle">Confirm Delete List</h3>
            <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this list? All tasks in this list will be permanently deleted.</p>
            <p class="task-preview">"<span id="listName"></span>"</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
            <button type="button" class="btn btn-delete modal-confirm">Delete List</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/lists.js') }}"></script>
<script src="{{ url_for('static', filename='js/list-delete-modal.js') }}"></script>
{% endblock %}